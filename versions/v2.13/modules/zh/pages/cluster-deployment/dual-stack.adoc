= IPv4/IPv6 Dual-stack
ifeval::["{build-type}" != "srfa"]
:page-languages: [en, zh]
endif::[]
:revdate: 2025-12-10
:page-revdate: {revdate}

Kubernetes supports IPv4-only, IPv6-only, and dual-stack networking configurations.
For more details, refer to the official https://kubernetes.io/docs/concepts/services-networking/dual-stack/[Kubernetes documentation].

== Installing Rancher on IPv6-Only or Dual-Stack Clusters

Rancher can run on clusters using:

* IPv4-only
* IPv6-only
* Dual-stack (IPv4 + IPv6)

When you install Rancher on an *IPv6-only cluster*, it can communicate externally *only over IPv6*. This means it can provision:

* IPv6-only clusters
* Dual-stack clusters  
  __(IPv4-only downstream clusters are not possible in this case)__

When you install Rancher on a *dual-stack cluster*, it can communicate over both IPv4 and IPv6, and can therefore provision:

* IPv4-only clusters
* IPv6-only clusters
* Dual-stack clusters

For installation steps, see the guide: xref:installation-and-upgrade/installation-and-upgrade.adoc[*Installing and Upgrading Rancher*].

=== Requirement for the Rancher Server URL

When provisioning IPv6-only downstream clusters, the *Rancher Server URL must be reachable over IPv6* because downstream nodes connect back to the Rancher server using IPv6.

== Provisioning IPv6-Only or Dual-Stack Clusters

You can provision RKE2 and K3s *Node driver* (machine pools) or *Custom cluster* (existing hosts) clusters using IPv4-only, IPv6-only, or dual-stack networking.

=== Network Configuration

To enable IPv6-only or dual-stack networking, you must configure:

* Cluster CIDR
* Service CIDR
* Stack Preference

Configuration references:

* xref:cluster-deployment/configuration/k3s.adoc[K3s Cluster Configuration Reference]
* xref:cluster-deployment/configuration/rke2.adoc[RKE2 Cluster Configuration Reference]

=== Support for Windows

Kubernetes on Windows:

|===
| Feature | Support Status

| IPv6-only clusters
| Not supported

| Dual-stack clusters
| Supported

| Services
| Limited to a single IP famil
|===

For more information, see the https://kubernetes.io/docs/concepts/services-networking/dual-stack/#windows-support[Kubernetes Documentation].

K3s does *not* support Windows (https://documentation.suse.com/cloudnative/k3s/latest/en/faq.html#_does_k3s_support_windows[FAQ])

RKE2 supports Windows, but requires using either `Calico` or `Flannel` as the CNI.  
Note that Windows installations of RKE2 do not support dual-stack clusters using BGP.
For more details, see https://documentation.suse.com/cloudnative/rke2/latest/en/networking/basic_network_options.html[RKE2 Network Options].


=== Provisioning Node Driver Clusters

Rancher currently supports assigning IPv6 addresses in *node driver* clusters with:

* xref:cluster-deployment/infra-providers/aws/machine-configuration.adoc[Amazon EC2]
* xref:cluster-deployment/infra-providers/digitalocean/machine-configuration.adoc[DigitalOcean]

Support for additional providers will be introduced in future releases.

[NOTE]
.DigitalOcean Limitation
====
Creating an **IPv6-only cluster** using the DigitalOcean node driver is currently **not supported**. For more details, please see https://github.com/rancher/rancher/issues/52523#issuecomment-3457803572[rancher/rancher#52523].
====

==== Infrastructure Requirements

Cluster nodes must meet the requirements listed in the xref:cluster/deployment/node-requirements.adoc[Node Requirements for Rancher Managed Clusters].

Machine pool configuration guides:

* xref:cluster-deployment/infra-providers/aws/aws.adoc[Amazon EC2]
* xref:cluster-deployment/infra-providers/digitalocean/digitalocean.adoc[DigitalOcean]

=== Provisioning Custom Clusters

To provision on your own nodes, follow the instructions in xref:cluster-deployment/custom-clusters/custom-clusters.adoc[Provision Kubernetes on Existing Nodes].

[NOTE]
====
* *Node Public IP* and *Node Private IP* fields accept IPv4, IPv6, or both (comma-separated).  
    >   Example: `10.0.0.5,2001:db8::1`
* In *IPv6-only* and *dual-stack* clusters, specify the nodeâ€™s *IPv6 address* as the *Private IP*.
====

==== Infrastructure Requirements

Infrastructure requirements are the same as above for node-driver clusters.

== Limitations

ifeval::["{build-type}" == "product"]
[IMPORTANT]
====
Refer to the https://scc.suse.com/rancher-docs/rancherprime/latest/en/suse-rancher-prime/https://scc.suse.com/rancher-docs/rancherprime/latest/en/suse-rancher-prime/dual-stack.html[IPv4/IPv6 Dual-Stack Prime documentation] for additional limitations regarding Prime-only IPv6 URL support.
====
endif::[]


=== GitHub.com

GitHub.com does *not* support IPv6. As a result:

* Any application repositories ( `ClusterRepo.catalog.cattle.io/v1` CR) hosted on GitHub.com are *not reachable* from IPv6-only clusters.
* Similarly, any *non-builtin node drivers* hosted on GitHub.com are also *not accessible* in IPv6-only environments.